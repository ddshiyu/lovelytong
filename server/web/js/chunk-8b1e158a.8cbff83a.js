(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b1e158a"],{1288:function(t,e,n){"use strict";var a=n("48fc"),i=n.n(a);i.a},"3ca3":function(t,e,n){"use strict";var a=n("6547").charAt,i=n("69f3"),r=n("7dd0"),c="String Iterator",s=i.set,o=i.getterFor(c);r(String,"String",(function(t){s(this,{type:c,string:String(t),index:0})}),(function(){var t,e=o(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=a(n,i),e.index+=t.length,{value:t,done:!1})}))},"48fc":function(t,e,n){},"4df4":function(t,e,n){"use strict";var a=n("0366"),i=n("7b0b"),r=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,m,d,f,v=i(t),g="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,b=void 0!==p,_=l(v),w=0;if(b&&(p=a(p,h>2?arguments[2]:void 0,2)),void 0==_||g==Array&&c(_))for(e=s(v.length),n=new g(e);e>w;w++)f=b?p(v[w],w):v[w],o(n,w,f);else for(m=_.call(v),d=m.next,n=new g;!(u=d.call(m)).done;w++)f=b?r(m,p,[u.value,w],!0):u.value,o(n,w,f);return n.length=w,n}},"59b7":function(t,e,n){"use strict";var a=n("ad65"),i=n.n(a);i.a},"5fbb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-6"},[n("div",{staticClass:"container d-flex"},[n("div",{staticClass:"content fs-s"},[t.flag?t._e():n("loading"),t.flag?n("div",[n("h1",{staticClass:"my-4"},[t._v(t._s(t.articleDetail.title))]),n("div",{staticClass:"bg-white p-2"},[n("p",[t._v("更新时间："+t._s(t._f("timeFilter")(t.articleDetail.createTime)))]),t.articleDetail.tags?n("p",[t._v("标签："),t._l(t.articleDetail.tags,(function(e,a){return n("span",{key:a,staticClass:"mr-3 tag mt-2"},[t._v(t._s(e.title))])}))],2):t._e()]),n("img",{staticClass:"my-5",attrs:{width:"100%",src:t.articleDetail.imageUrl,alt:""}}),n("div",{staticClass:"article-content",domProps:{innerHTML:t._s(t.articleDetail.content)}}),n("div",{staticClass:"py-2 sofa my-5"},[t._v("沙发等你来抢")]),n("comment",{attrs:{article_id:t.articleDetail._id,comments:t.comments},on:{sendCommentClick:t.sendComment}})],1):t._e()],1),n("div",{staticClass:"right"},[n("div",{staticClass:"article-toc",domProps:{innerHTML:t._s(t.articleDetail.toc)}})]),n("transition",{attrs:{name:"fade"}},[t.imgUrl?n("image-view",{attrs:{imgUrl:t.imgUrl},on:{"handle-image-view":function(e){t.imgUrl=""}}}):t._e()],1)],1)])},i=[],r=(n("4160"),n("a630"),n("3ca3"),n("159b"),n("96cf"),n("1da1")),c=n("864d"),s=n("b775");function o(t){return Object(s["a"])({method:"post",url:"/sendComment",data:t})}function l(t){return Object(s["a"])({method:"get",url:"/getComment?article_id=".concat(t)})}var u=n("fda6"),m=n("7ac2"),d=n("8e36"),f=n("97c5"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-wrap d-flex jc-center ai-center",on:{click:function(e){return t.$emit("handle-image-view")}}},[n("img",{attrs:{src:t.imgUrl,alt:""}})])},g=[],h={props:{imgUrl:{type:String}}},p=h,b=(n("9413"),n("2877")),_=Object(b["a"])(p,v,g,!1,null,"a3a385a0",null),w=_.exports,C={data:function(){return{articleDetail:{},flag:!1,comments:[],imgUrl:""}},components:{comment:f["a"],loading:m["a"],imageView:w},created:function(){this.fetchData()},mounted:function(){window.addEventListener("scroll",this.imgScroll)},methods:{fetchData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("/about"!==t.$route.path){e.next=6;break}return e.next=3,Object(u["a"])();case 3:n=e.sent,e.next=10;break;case 6:return a=t.$route.query.id,e.next=9,Object(c["b"])(a);case 9:n=e.sent;case 10:t.articleDetail=n.data,t.getArticleComment(n.data._id),i=d["a"].marked(n.data.content),i.then((function(e){t.articleDetail.content=e.content,t.articleDetail.toc=e.toc,(document.documentElement.clientWidth>600||document.body.clientWidth>600)&&t.$nextTick((function(){var e=document.getElementsByClassName("article-content")[0].getElementsByTagName("img");Array.from(e).forEach((function(e){e.onclick=function(){t.imgUrl=e.src}}))}))}));case 14:case"end":return e.stop()}}),e)})))()},getArticleComment:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l(t);case 2:a=n.sent,e.comments=a.data;case 4:case"end":return n.stop()}}),n)})))()},sendComment:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={article_id:e.articleDetail._id,webUser:JSON.parse(localStorage.userInfo).id,content:t},n.next=3,o(a);case 3:return n.next=5,l(e.articleDetail._id);case 5:i=n.sent,e.comments=i.data;case 7:case"end":return n.stop()}}),n)})))()},imgScroll:function(){var t=this;this.imgUrl="",this.$once("hook:beforeDestroy",(function(){window.removeEventListener("scroll",t.imgScroll)}))}},watch:{articleDetail:function(){this.flag=!0}}},x=C,y=(n("59b7"),Object(b["a"])(x,a,i,!1,null,"06f6f040",null));e["default"]=y.exports},"7ac2":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-center"},[a("img",{attrs:{width:"100",height:"100",src:n("6a61"),alt:""}}),a("p",[t._v("正在加载中...")])])}],r={},c=r,s=(n("e6a7"),n("2877")),o=Object(s["a"])(c,a,i,!1,null,"08ad2082",null);e["a"]=o.exports},"864d":function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return s}));var a=n("b775");function i(){return Object(a["a"])({method:"get",url:"/article"})}function r(t){return Object(a["a"])({method:"get",url:"/articleDetail?id=".concat(t)})}function c(){return Object(a["a"])({method:"get",url:"/tag"})}function s(t){return Object(a["a"])({method:"get",url:"/articleByTag?tagId=".concat(t)})}},9413:function(t,e,n){"use strict";var a=n("df2f"),i=n.n(a);i.a},"97c5":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"w100 py-2 px-3",attrs:{placeholder:t.contentPlaceholder},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",{staticClass:"t-right my-4"},[n("button",{staticClass:"btn send-comment text-white",on:{click:t.sendComment}},[t._v("发送")])]),n("div",{staticClass:"comment-wrapper w100 bg-white p-5"},[t.comments.length?t._l(t.comments,(function(e){return n("div",{key:e._id,staticClass:"comment-item w100 p-5 mb-4"},[n("div",{staticClass:"user d-flex mb-3"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.webUser.avatar,expression:"comment.webUser.avatar"}],attrs:{width:"32",height:"32",alt:""}}),n("span",{staticClass:"ml-2"},[t._v(t._s(e.webUser.name))])]),n("div",{staticClass:"comment-detail mb-3 fs-s"},[t._v(" "+t._s(e.content)+" ")]),t._m(0,!0)])})):n("div",{staticClass:"t-center py-4"},[t._v("还没有评论哦！沙发等着你")])],2)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time d-flex jc-between fs-xs"},[n("div",{staticClass:"text-article-content"},[t._v("2020-07-02 10:22")])])}],r=(n("1468"),{data:function(){return{content:""}},props:{comments:{type:Array,default:[]},contentPlaceholder:{type:String,default:"✎文明用语，希望留下你的足迹..."}},computed:{},methods:{sendComment:function(){localStorage.userInfo?""!==this.content?(this.$emit("sendCommentClick",this.content),this.content=""):this.$message("内容不能为空哦😯"):this.$message("您还没有登录哦")}}}),c=r,s=(n("1288"),n("2877")),o=Object(s["a"])(c,a,i,!1,null,"599ad766",null);e["a"]=o.exports},a630:function(t,e,n){var a=n("23e7"),i=n("4df4"),r=n("1c7e"),c=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:c},{from:i})},a94b:function(t,e,n){},ad65:function(t,e,n){},df2f:function(t,e,n){},e6a7:function(t,e,n){"use strict";var a=n("a94b"),i=n.n(a);i.a},fda6:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("b775");function i(){return Object(a["a"])({method:"get",url:"/about"})}}}]);